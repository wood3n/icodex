---
title: 重构读后感（一）
---

## 起因

​ 入职新公司一个多月了，一上手项目就是重构别人的代码，在这个过程中学习了 React Hooks，TypeScript，git work flow 等主流前端开发工具或者叫框架。但是重构代码的过程中，依然遇到很多问题，今天 boss 让整理一下重构方案，写的不是太让人满意，改了两三遍，不是写的太简单就是写的太罗嗦，语言表达能力不足的同时，对于重构一些细节点也整理得不是太到位，于是买了《重构：改善既有代码的设计（第 2 版）》这本书（以下简称《重构》），刚好第二版的《重构》使用了 JS 作为示例代码，欣喜所狂啊！:smile::smile:

## 什么是重构

重构，refactor，应当是指在不改变软件外在功能的前提下，对软甲内部结构进行调整，简单理解就是**装修**。而重构本身会设计一系列的方法，被称为重构手法。应当注意的是重构和优化的区别，重构是**为了让代码更容易被人理解**，而优化是为了提升软件的性能以及用户体验！从这个角度来看，重构以后的代码，可能运行得更快，也可能会发生性能上的损失。

## 为何重构

- 延伸代码的拓展性，让代码更能适应软件需求的变更。高质量的代码，在需求变更的时候，很容易找到可修改的地方；而杂乱的代码往往无从下手，或者修改可能会导致连锁 bug 的效应。

![img](../../images/v2-b65bedbd997de0f20b9fa9f40cf59ffb_hd.webp)

《重构》书中提到一个设计耐久性的名词，在软件开发的过程中，一开始会进展很快，但是随着软件越来越完善，功能越来越多，添加新需求所需的时间却越来越长，设计良好的代码，能更长时间保持开发的快速。

- 提高代码的可读性，程序是从代码产生的，如果程序员都无法理解代码，那么如何产生良好的程序呢？正如《重构》书中的经典语录：傻子都可以写出让计算机理解的代码，唯有能写出人类能理解的代码，才是优秀的程序员。
- 发现 bug，一些因为代码设计上的潜在 bug 很大程度上可以在重构的过程中去发现。

- 节省代码开发成本，相信这一条可以让你说服 boss 允许你去折腾。如果跟一个不懂技术的 boss 谈及重构可以提升可读性，减少 bug…之类的话语，他也不知道你确切的目的是什么，那就是为了以后需求开发更快，避免项目延期，同时也能让修改 bug 更快！

## 问题

重构过程往往会遇到这样那样的问题，截止到目前，我遇到的主要问题如下

### 分支管理问题

我目前的项目存在两条开发分支，一条分支为`feat`分支，主要做新功能的开发，以及部分 bug 的修复；而另一条则为`refactor`分支，用于重构！基于 git work flow 的迭代开发方式来说，需要定期从`feat`分支合并代码到`refactor`分支上来，然后我再从`refactor`分支获取主要更新，并`merge`回本地，然后就可以进行我的重构开发，完了`commit`，`push`之类的。

但是这其中存在的问题就是解决冲突的问题，必须在每次解决冲突的时候格外小心才行！

### 测试

不能改变软件功能是重构的必须前提，所以在重构甚至重写之前，考虑完全理清页面的思路，不能放过每一个细节，对于一些交互上的设计等考虑详细记录下来。我的 boss 给我的建议是先做一个整体的系分文档，然后再开始重构。

详细的系统分析是一门学科，在 MOOC 上有大连理工的相关课程 —— [系统分析与设计*大连理工大学*中国大学 MOOC(慕课) (icourse163.org)](http://www.icourse163.org/course/DLUT-1002602073?tid=1206261224)
